const input=document.querySelector("#search_field"),submitButton=document.querySelector("#submit");let requestURL="https://ipgeolocation.abstractapi.com/v1/?api_key=c5094700a1614fa08030c502c0fdf9f2";function initMap(e,t){var o={lat:e,lng:t},n=new google.maps.Map(document.querySelector("#map"),{zoom:15,center:o,streetViewControl:!1,fullscreenControl:!1,mapTypeControl:!1});new google.maps.Marker({position:o,map:n,icon:{url:"img/location_icon.svg",scaledSize:new google.maps.Size(32,40)}})}function showData(e){document.querySelector("#isp_get").textContent=e.connection.isp_name,e.timezone.gmt_offset>0?document.querySelector("#timezone_get").textContent="UTC+0"+e.timezone.gmt_offset+":00":e.timezone.gmt_offset<0&&(document.querySelector("#timezone_get").textContent="UTC"+e.timezone.gmt_offset+":00"),document.querySelector("#location_get").textContent=e.city,document.querySelector("#ip_get").textContent=e.ip_address}function sendRequest(e,t){return new Promise(((o,n)=>{const s=new XMLHttpRequest;s.open(e,t),s.responseType="json",s.onload=()=>{s.status>=400?n(s.response):o(s.response)},s.onerror=()=>{n(s.response)},s.send()}))}navigator.geolocation.getCurrentPosition((function(e){initMap(e.coords.latitude,e.coords.longitude)}),(function(e){console.log(e)})),submitButton.addEventListener("click",(function(){input.value&&(requestURL="https://ipgeolocation.abstractapi.com/v1/?api_key=c5094700a1614fa08030c502c0fdf9f2&ip_address="+input.value,sendRequest("GET",requestURL).then((e=>{initMap(e.latitude,e.longitude),showData(e)})).catch((e=>customAlert())),input.value="")})),sendRequest("GET",requestURL).then((e=>{showData(e)})).catch((e=>console.log(e)));const alert=document.querySelector("#alert");function customAlert(){alert.classList.remove("hide"),alert.classList.add("show"),alert.classList.add("showAlert"),setTimeout((()=>{alert.classList.add("hide"),alert.classList.remove("show")}),5e3)}const closeButton=document.querySelector(".close-btn");closeButton.addEventListener("click",(()=>{alert.classList.add("hide"),alert.classList.remove("show")}));